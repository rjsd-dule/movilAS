<ion-content [fullscreen]="true">

  <ion-card *ngFor="let token of tokens">
    @if(!token.isEditing) {
    <ion-card-header>
      <ion-card-title>{{token.nombreCultivo}}</ion-card-title>
      <ion-card-subtitle><strong>Expira el: </strong>{{convertedDate(token.expira!)}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <strong>Valor del Token</strong><br>
      {{token.tokenValue}}
    </ion-card-content>
    <ion-button color="primary" fill="clear" (click)="habilitarEdicion(token)">
      <ion-icon name="create-outline"></ion-icon>
    </ion-button>
    } @else {
    <form [formGroup]="formGroup" (ngSubmit)="updateToken(token)">
      <ion-card-header>
        <ion-card-title>
          {{token.nombreCultivo}}
        </ion-card-title>
        <ion-card-subtitle>
          <ion-item>
            <ion-input label="Nueva Fecha" type="date" labelPlacement="stacked" placeholder="Nueva Fecha"
              formControlName="nuevaFecha">
            </ion-input>
          </ion-item>
        </ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        {{token.tokenValue}}
      </ion-card-content>
      <ion-button expand="block" type="submit" [disabled]="!formGroup.valid">
        <!-- Si es modo create => "Crear UbicaciÃ³n", sino => "Guardar Cambios" -->
        Guardar Cambios
      </ion-button>
    </form>
    }

  </ion-card>
</ion-content>